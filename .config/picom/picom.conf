#################################
# Backend and Performance
#################################

backend = "glx";  # Use "xrender" if glx causes vsync errors or artifacts
vsync = true;     # Set to false if you get the glx_init error
use-damage = true;  # Helps with rendering efficiency

#################################
# Shadows (Optional - Disable if Unwanted)
#################################

shadow = false;  # Set to true for window shadows (can pair well with rounding)

#################################
# Rounded Corners
#################################

corner-radius = 12;  # Adjust for preference (8-15 is subtle)

rounded-corners-exclude = [
  "window_type = 'desktop'",
  "window_type = 'popup_menu'",
  "window_type = 'dropdown_menu'"
];

# Optional: Round borders (0 to disable)
round-borders = 1;

#################################
# Blur (for Glassy Transparency)
#################################

blur = true;
blur-method = "dual_kawase";  # "kawase" for lighter, "box" for basic
blur-strength = 0;  # 1-10; lower if performance is an issue

blur-background-exclude = [
  "class_g = 'dwm'",  # Avoid blurring the bar
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'slop'",  # Prevent blur during maim selections
];

#################################
# Opacity/Transparency Rules
#################################

# Default opacity for inactive windows (optional global fallback)
inactive-opacity = 1.0;  # 1.0 = fully opaque; lower to make all unfocused windows transparent

opacity-rule = [
  # Brave: 90% opacity when unfocused
  "90:class_g = 'Brave-browser' && !focused",
  # LibreWolf: 90% opacity when unfocused
  "70:class_g = 'librewolf' && !focused",
  # Chromium: 90% opacity when unfocused
  "70:class_g = 'Chromium' && !focused",
  # Force fullscreen windows fully opaque (e.g., videos)
  "100:fullscreen"
];

# Optional: Add argb for alpha-enabled windows if rules don't apply
# "90:class_g = 'Brave-browser' && argb && !focused",

#################################
# Fading (Optional Animations)
#################################

fading = true;
fade-delta = 4;
fade-in-step = 0.03;
fade-out-step = 0.03;

fade-exclude = [
  "class_g = 'dwm'"
];

#################################
# Other Tweaks
#################################

# Unredirect fullscreen windows (better for games/videos)
unredir-if-possible = true;

# Detect rounded corners automatically
detect-rounded-corners = true;

# Mark WM as compositor (helps with some apps)
mark-wmwin-focused = true;
mark-ovredir-focused = true;

# Experimental backends if using a picom fork
# experimental-backends = true;  # Uncomment for ibhagwan/jonaburg forks
